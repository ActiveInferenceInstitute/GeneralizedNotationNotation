{
  "_HeaderComments": "# GNN Example: Airplane Trading POMDP\n# Format: Markdown representation of a POMDP model for an airplane trading scenario.\n# Version: 1.0\n# This file is machine-readable and describes an agent making trading decisions on an airplane,\n# where financial losses can impact fuel levels.",
  "ModelName": "Airplane Trading POMDP v1.0",
  "GNNSection": "AirplaneTradingPOMDP",
  "GNNVersionAndFlags": "GNN v1",
  "ModelAnnotation": "This model represents a POMDP agent managing an investment portfolio aboard an airplane.\nThe key challenge is that financial losses from trading directly impact the plane's fuel reserves.\n- Hidden State Factors:\n    1.  `NivelCombustible` (Fuel Level): {Cr\u00edtico, Bajo, Medio, Alto} - 4 states\n    2.  `RendimientoMercado` (Market Performance): {P\u00e9rdidas, Neutral, Rentable} - 3 states\n- Observation Modalities:\n    1.  `IndicadorCombustible` (Fuel Gauge): {CasiVac\u00edo, Mitad, Lleno} - 3 outcomes\n    2.  `ResultadoOperacion` (Trading Outcome): {P\u00e9rdida, SinCambio, Ganancia} - 3 outcomes\n- Control Factor (Action):\n    1.  `EstrategiaInversion` (Investment Strategy): {Desinvertir, Mantener, Invertir} - 3 actions",
  "StateSpaceBlock": "# Hidden States (s_factorIndex[num_states_factor, 1, type=dataType])\ns_f0[4,1,type=int]   # Hidden State Factor 0: NivelCombustible (0:Cr\u00edtico, 1:Bajo, 2:Medio, 3:Alto)\ns_f1[3,1,type=int]   # Hidden State Factor 1: RendimientoMercado (0:P\u00e9rdidas, 1:Neutral, 2:Rentable)\n\n# Observations (o_modalityIndex[num_outcomes_modality, 1, type=dataType])\no_m0[3,1,type=int]   # Observation Modality 0: IndicadorCombustible (0:CasiVac\u00edo, 1:Mitad, 2:Lleno)\no_m1[3,1,type=int]   # Observation Modality 1: ResultadoOperacion (0:P\u00e9rdida, 1:SinCambio, 2:Ganancia)\n\n# Control Factors / Policies (pi_controlIndex[num_actions_factor, type=dataType])\npi_c0[3,type=float]  # Policy for Control Factor 0: EstrategiaInversion (0:Desinvertir, 1:Mantener, 2:Invertir)\n\n# Actions (u_controlIndex[1, type=dataType]) - chosen actions\nu_c0[1,type=int]     # Chosen action for EstrategiaInversion\n\n# Likelihood Mapping (A_modalityIndex[outcomes, factor0_states, factor1_states, ..., type=dataType])\nA_m0[3,4,3,type=float] # IndicadorCombustible likelihood given NivelCombustible and RendimientoMercado\nA_m1[3,4,3,type=float] # ResultadoOperacion likelihood\n\n# Transition Dynamics (B_factorIndex[next_states, prev_states, control0_actions, ..., type=dataType])\n# B_f0[next_fuel, prev_fuel, prev_market, action_investment]\nB_f0[4,4,3,3,type=float] # NivelCombustible transitions\n# B_f1[next_market, prev_market, action_investment]\nB_f1[3,3,3,type=float]   # RendimientoMercado transitions\n\n# Preferences (C_modalityIndex[outcomes, type=dataType]) - Log preferences over outcomes\nC_m0[3,type=float]   # Preferences for IndicadorCombustible (prefer Lleno)\nC_m1[3,type=float]   # Preferences for ResultadoOperacion (prefer Ganancia)\n\n# Priors over Initial Hidden States (D_factorIndex[num_states_factor, type=dataType])\nD_f0[4,type=float]   # Prior for NivelCombustible (e.g., start Alto)\nD_f1[3,type=float]   # Prior for RendimientoMercado (e.g., start Neutral)\n\n# Expected Free Energy\nG[1,type=float]      # Overall Expected Free Energy\n\n# Time\nt[1,type=int]",
  "Connections": "# Priors to initial states\n(D_f0, D_f1) -> (s_f0, s_f1)\n\n# States to likelihoods to observations\n(s_f0, s_f1) -> (A_m0, A_m1)\n(A_m0) -> (o_m0)\n(A_m1) -> (o_m1)\n\n# States and actions to transitions to next states (s_f0_next, s_f1_next are implied)\n(s_f0, s_f1, u_c0) -> (B_f0, B_f1)\n(B_f0) -> s_f0_next\n(B_f1) -> s_f1_next\n\n# Preferences and predicted outcomes/states to EFE\n(C_m0, C_m1, A_m0, A_m1, B_f0, B_f1, s_f0, s_f1) > G # Simplified EFE dependency\n\n# EFE to policies\nG > pi_c0\n\n# Policies to chosen actions\n(pi_c0) -> u_c0",
  "InitialParameterization": "# s_f0 (NivelCombustible): 0:Cr\u00edtico, 1:Bajo, 2:Medio, 3:Alto\n# s_f1 (RendimientoMercado): 0:P\u00e9rdidas, 1:Neutral, 2:Rentable\n# o_m0 (IndicadorCombustible): 0:CasiVac\u00edo, 1:Mitad, 2:Lleno\n# o_m1 (ResultadoOperacion): 0:P\u00e9rdida, 1:SinCambio, 2:Ganancia\n# u_c0 (EstrategiaInversion): 0:Desinvertir, 1:Mantener, 2:Invertir\n\n# A_m0[obs_fuel, state_fuel, state_market]. RendimientoMercado (s_f1) has minor/no direct effect on fuel gauge.\n# Probabilities sum to 1 over obs_fuel for each (state_fuel, state_market) pair.\nA_m0={ # Likelihood P(o_m0 | s_f0, s_f1)\n  # o_m0 = 0 (CasiVac\u00edo)\n  ( ((0.80,0.80,0.80), (0.60,0.60,0.60), (0.10,0.10,0.10), (0.05,0.05,0.05)) ), # s_f0 (Cr\u00edtico,Bajo,Medio,Alto) for (P,N,R) of s_f1\n  # o_m0 = 1 (Mitad)\n  ( ((0.15,0.15,0.15), (0.30,0.30,0.30), (0.80,0.80,0.80), (0.40,0.40,0.40)) ),\n  # o_m0 = 2 (Lleno)\n  ( ((0.05,0.05,0.05), (0.10,0.10,0.10), (0.10,0.10,0.10), (0.55,0.55,0.55)) )\n}\n\n# A_m1[obs_trade, state_fuel, state_market]. Fuel level (s_f0) has no direct effect on trade outcome.\n# Probabilities sum to 1 over obs_trade for each (state_fuel, state_market) pair.\nA_m1={ # Likelihood P(o_m1 | s_f0, s_f1)\n  # o_m1 = 0 (P\u00e9rdida)\n  ( ((0.7,0.2,0.1), (0.7,0.2,0.1), (0.7,0.2,0.1), (0.7,0.2,0.1)) ), # s_f1 (P,N,R) for (Critico,Bajo,Medio,Alto) of s_f0\n  # o_m1 = 1 (SinCambio)\n  ( ((0.2,0.6,0.2), (0.2,0.6,0.2), (0.2,0.6,0.2), (0.2,0.6,0.2)) ),\n  # o_m1 = 2 (Ganancia)\n  ( ((0.1,0.2,0.7), (0.1,0.2,0.7), (0.1,0.2,0.7), (0.1,0.2,0.7)) )\n}\n\n# B_f0[next_fuel, prev_fuel, prev_market, action_investment]\n# Fuel consumption: normal with 'Mantener'. Accelerated if trading ('Invertir'/'Desinvertir') during 'P\u00e9rdidas' market.\n# Each innermost tuple is for actions (Desinvertir, Mantener, Invertir)\n# For simplicity, only showing a few key transitions. A full B_f0 is large.\n# This will be visualized as a (4*4*3)x3 = 48x3 matrix by the visualizer.\nB_f0={ # P(s_f0' | s_f0, s_f1, u_c0)\n  # s_f0' = 0 (Cr\u00edtico)\n  ( # s_f0 = 0 (Cr\u00edtico)\n    ( (1.0,1.0,1.0), (1.0,1.0,1.0), (1.0,1.0,1.0) ), # Stays Cr\u00edtico\n    # s_f0 = 1 (Bajo)\n    ( (1.0,0.4,1.0), (0.4,0.1,0.4), (0.1,0.0,0.1) ), # If s_f1=P\u00e9rdidas (idx 0) & trade (act 0 or 2) -> Cr\u00edtico\n                                                    # If s_f1=Neutral/Rentable or act=Mantener -> less likely Cr\u00edtico\n    # s_f0 = 2 (Medio)\n    ( (0.8,0.1,0.8), (0.1,0.0,0.1), (0.0,0.0,0.0) ),\n    # s_f0 = 3 (Alto)\n    ( (0.5,0.0,0.5), (0.0,0.0,0.0), (0.0,0.0,0.0) )\n  ),\n  # s_f0' = 1 (Bajo)\n  (\n    ( (0.0,0.0,0.0), (0.0,0.0,0.0), (0.0,0.0,0.0) ), # From Cr\u00edtico (cannot improve)\n    ( (0.0,0.6,0.0), (0.6,0.8,0.6), (0.8,0.9,0.8) ), # From Bajo\n    ( (0.2,0.8,0.2), (0.8,0.1,0.8), (0.1,0.0,0.1) ), # From Medio\n    ( (0.4,0.1,0.4), (0.1,0.0,0.1), (0.0,0.0,0.0) )  # From Alto\n  ),\n  # s_f0' = 2 (Medio)\n  (\n    ( (0.0,0.0,0.0), (0.0,0.0,0.0), (0.0,0.0,0.0) ), # From Cr\u00edtico\n    ( (0.0,0.0,0.0), (0.0,0.1,0.0), (0.1,0.1,0.1) ), # From Bajo\n    ( (0.0,0.1,0.0), (0.1,0.9,0.1), (0.9,0.9,0.9) ), # From Medio\n    ( (0.1,0.9,0.1), (0.9,0.1,0.9), (0.1,0.0,0.1) )  # From Alto\n  ),\n  # s_f0' = 3 (Alto)\n  (\n    ( (0.0,0.0,0.0), (0.0,0.0,0.0), (0.0,0.0,0.0) ), # From Cr\u00edtico\n    ( (0.0,0.0,0.0), (0.0,0.0,0.0), (0.0,0.0,0.0) ), # From Bajo\n    ( (0.0,0.0,0.0), (0.0,0.0,0.0), (0.0,0.1,0.0) ), # From Medio\n    ( (0.0,0.0,0.0), (0.0,0.9,0.0), (0.9,0.9,0.9) )  # From Alto (stays Alto if not trading in loss, or Mantener)\n  )\n  # Note: Probabilities for B_f0 need to sum to 1 over s_f0' for each (s_f0, s_f1, u_c0) combination.\n  # The above is illustrative and would need careful normalization. For a real model, these would be precise.\n  # Placeholder: For robust parsing, ensure this complex structure is handled or simplified if needed by the target execution engine.\n  # For visualizer, it will become many rows.\n}\n\n# B_f1[next_market, prev_market, action_investment]\n# Market transitions. Investing in good market might keep it good. Divesting from bad market might mitigate.\n# This will be visualized as (3*3)x3 = 9x3 matrix.\nB_f1={ # P(s_f1' | s_f1, u_c0)\n  # s_f1' = 0 (P\u00e9rdidas)\n  ( ((0.7,0.5,0.4), (0.4,0.3,0.2), (0.2,0.1,0.1)) ), # s_f1 (P,N,R) for actions (D,M,I)\n  # s_f1' = 1 (Neutral)\n  ( ((0.2,0.4,0.4), (0.5,0.6,0.5), (0.4,0.3,0.2)) ),\n  # s_f1' = 2 (Rentable)\n  ( ((0.1,0.1,0.2), (0.1,0.1,0.3), (0.4,0.6,0.7)) )\n  # Probabilities sum to 1 over s_f1' for each (s_f1, u_c0) pair.\n}\n\n# C_m0: Preferences for IndicadorCombustible (0:CasiVac\u00edo, 1:Mitad, 2:Lleno)\nC_m0={(-5.0, 0.0, 5.0)} # Strongly prefer Lleno, strongly disprefer CasiVac\u00edo\n\n# C_m1: Preferences for ResultadoOperacion (0:P\u00e9rdida, 1:SinCambio, 2:Ganancia)\nC_m1={(-5.0, 0.0, 5.0)} # Strongly prefer Ganancia, strongly disprefer P\u00e9rdida\n\n# D_f0: Prior for NivelCombustible (0:Cr\u00edtico, 1:Bajo, 2:Medio, 3:Alto)\nD_f0={(0.0, 0.0, 0.1, 0.9)} # Start Alto\n\n# D_f1: Prior for RendimientoMercado (0:P\u00e9rdidas, 1:Neutral, 2:Rentable)\nD_f1={(0.2, 0.6, 0.2)} # Start Neutral, some chance of P/R",
  "Equations": "# Standard POMDP / Active Inference equations for:\n# 1. State estimation (approximate posterior over hidden states)\n#    q(s_t) = \u03c3( ln(A^T o_t) + Prior_t )\n# 2. Policy evaluation (Expected Free Energy)\n#    G(\u03c0) = E_q(o_t, s_t | \u03c0) [ C(o_t) - D_KL[q(s_t|o_t,\u03c0)||q(s_t|\u03c0)] - H[q(o_t|s_t,\u03c0)] ]\n# 3. Action selection (Softmax over -G)\n#    P(u_t|\u03c0) = \u03c3(-G(\u03c0))",
  "Time": "Dynamic\nDiscreteTime=t\nModelTimeHorizon=20 # Example planning horizon",
  "ActInfOntologyAnnotation": "# Hidden States\ns_f0=NivelDeCombustible\ns_f1=DesempenoDelMercado\n\n# Observations\no_m0=MedidorDeCombustible\no_m1=ResultadoDeTransaccion\n\n# Control/Policy Related\npi_c0=VectorPoliticaControl0\nu_c0=AccionControl0\n\n# Likelihoods\nA_m0=MatrizVerosimilitudModalidad0\nA_m1=MatrizVerosimilitudModalidad1\n\n# Transitions\nB_f0=MatrizTransicionFactor0\nB_f1=MatrizTransicionFactor1\n\n# Preferences\nC_m0=VectorPreferenciaModalidad0\nC_m1=VectorPreferenciaModalidad1\n\n# Priors\nD_f0=DistribucionPreviaFactorOculto0\nD_f1=DistribucionPreviaFactorOculto1\n\n# Other\nG=EnergiaLibreEsperada\nt=PasoDeTiempo",
  "ModelParameters": "num_hidden_states_factors: [4, 3]  # s_f0[4], s_f1[3]\nnum_obs_modalities: [3, 3]     # o_m0[3], o_m1[3]\nnum_control_actions: [3]       # u_c0[3] (single control factor)",
  "Footer": "Airplane Trading POMDP v1.0 - End of Specification.\nNote: B_f0 parameterization is illustrative and requires careful normalization for a functional model.",
  "Signature": "Creator: GNN Example Generator\nDate: 2024-07-29\nStatus: Example for testing and demonstration."
}
[tool:pytest]
# Pytest configuration for GNN Pipeline Testing
# This configuration helps avoid plugin conflicts and improves test discovery

# Test discovery
testpaths = src/tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Disable problematic plugins that can cause dependency conflicts
addopts = 
    --strict-markers
    --strict-config
    --tb=short
    --disable-warnings
    -p no:randomly
    -p no:sugar
    -p no:cacheprovider
    -p no:stepwise
    --maxfail=10
    --durations=10

# Markers for test categorization
markers =
    fast: Fast tests that run quickly
    slow: Slow tests that may take significant time
    integration: Integration tests across modules
    unit: Unit tests for individual functions
    pipeline: Pipeline infrastructure tests
    core: Core module tests
    utilities: Utility function tests
    validation: Validation and type checking tests
    performance: Performance and benchmarking tests
    specialized: Specialized module tests (audio, visualization, etc.)
    reporting: Report generation tests

# Minimum version requirements
minversion = 6.0

# Timeout settings (per-test)
timeout = 10
timeout_method = thread
asyncio_mode = auto

# Coverage settings (if pytest-cov is available)
# --cov = src
# --cov-report = term-missing
# --cov-report = html:output/coverage_html
# --cov-fail-under = 50

# Logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Performance settings
cache_dir = .pytest_cache
collect_ignore = ["setup.py", "conftest.py"]

# Disable plugins that may cause issues
disable_plugins = 
    randomly
    sugar
    benchmark